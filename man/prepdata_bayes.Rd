% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metab_bayes.R
\name{prepdata_bayes}
\alias{prepdata_bayes}
\title{Prepare data for passing to Stan}
\usage{
prepdata_bayes(data, data_daily, ply_date = NA, specs, engine, model_name)
}
\arguments{
\item{data}{data.frame of input data at the temporal resolution of raw 
observations (unit-value). Columns must have the same names, units, and 
format as the default. The solar.time column must also have a timezone code
('tzone' attribute) of 'UTC'. See the \strong{'Formatting \code{data}'} 
section below for a full description.}

\item{data_daily}{data.frame containing inputs with a daily timestep. See the
\strong{'Formatting \code{data_daily}'} section below for a full 
description.}

\item{ply_date}{the modal date of this ply of data and data_daily, and the 
date by which this ply should be referred topresent.}

\item{specs}{a list of model specifications and parameters for a model. 
Although this may be specified manually (it's just a list), it is easier
and safer to use \code{\link{specs}} to generate the list, because the set
of required parameters and their defaults depends on the model given in the
\code{model_name} argument to \code{specs}. The help file for 
\code{\link{specs}} lists the necessary parameters, describes them in 
detail, and gives default values.}

\item{engine}{The software or function to use in fitting the model. Should be
specified via \code{mm_name} rather than here. For \code{type='bayes'}, 
always \code{'stan'} indicating the software package to use for the MCMC 
process (see http://mc-stan.org/). For types in 
\code{c('mle','night','sim')} there's again only one option per model (R 
functions; these need not be named here but will be noted in the suffix of 
the model name, e.g., \code{"m_np_oi_tr_plrckm.nlm"} uses \code{nlm()} for 
model fitting). For type='Kmodel', the name of an interpolation or 
regression method relating K to the predictor[s] of choice. One of 
\code{c("mean", "lm", "loess")}.}

\item{model_name}{character string identifying the model features. Use 
\code{\link{mm_name}} to create a valid name based on desired attributes, 
or \code{\link{mm_valid_names}} to see all valid names. Two alternatives to
the names given by \code{mm_valid_names()} are also accepted: (1) a model 
type as accepted by the \code{type} argument to \code{mm_name}, which will 
be used to create the default model name for that model type, or (2) a full
model file path for custom Bayesian models, as long as basename(model_name)
can still be parsed correctly with \code{mm_parse_name()} and the file 
exists. In that case the file may be specified either as a file path 
relative to the streamMetabolizer models directory (the first assumption; 
this directory can be found with \code{system.file("models", 
package="streamMetabolizer")}) or as an absolute path or a path relative to
the current working directory (the second assumption, if the first 
assumption turns up no files of the given name).}
}
\value{
list of data for input to runstan_bayes
}
\description{
This function accepts exactly one day's worth of data, (one ply, which might 
be 24 hrs or 31.5 or so), which should already be validated. It prepares the 
data needed to run a Bayesian MCMC method to estimate GPP, ER, and K600.
}
\keyword{internal}

