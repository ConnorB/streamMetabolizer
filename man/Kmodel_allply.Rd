% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metab_Kmodel.R
\name{Kmodel_allply}
\alias{Kmodel_allply}
\title{Fit a K model}
\usage{
Kmodel_allply(data_daily_all, engine, weights, predictors, transforms,
  other_args)
}
\arguments{
\item{data_daily_all}{data to use as input, with columns including K600.daily.obs, 
weight, and any predictors}

\item{engine}{The software or function to use in fitting the model. Should be
specified via \code{mm_name} rather than here. For \code{type='bayes'},
always \code{'stan'} indicating the software package to use for the MCMC 
process (see http://mc-stan.org/). For types in
\code{c('mle','night','sim')} there's again only one option per model (R
functions; these need not be named here but will be noted in the suffix of
the model name, e.g., \code{"m_np_oi_tr_plrckm.nlm"} uses \code{nlm()} for
model fitting). For type='Kmodel', the name of an interpolation or
regression method relating K to the predictor[s] of choice. One of
\code{c("mean", "lm", "loess")}.}

\item{predictors}{For Kmodel, character vector of variables (column names in 
data or data_daily) to use in predicting K. Leave blank or set to c() for 
no predictors. Otherwise, one or more of these may be included: c("date", 
"velocity.daily", "discharge.daily").}

\item{transforms}{For Kmodel, a named character vector of names of functions 
(probably 'log' or NA) to apply to K600.daily and/or the predictors. K600.daily should 
probably be logged. The vector names must match the values of 
\code{predictors}, although not all elements of \code{predictors} must be 
included in \code{transforms}. Recommended transforms include 
\code{c(K600.daily='log', date=NA, velocity.daily="log", discharge.daily="log")}}

\item{other_args}{Other arguments passed to the fitting function given by 
\code{specs$engine}. \code{na.rm=TRUE} is already passed to 
\code{mean} (which is actually implemented as \code{sum}, anyway).}
}
\description{
The model will predict daily K estimates from preliminary daily K estimates. 
Called from metab_Kmodel().
}
\keyword{internal}

